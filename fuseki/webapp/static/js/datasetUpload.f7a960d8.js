(self["webpackChunkapache_jena_fuseki"]=self["webpackChunkapache_jena_fuseki"]||[]).push([[612],{6518:function(e,n,t){"use strict";function i(){var e="/home/afs/ASF/Release/jena/target/checkout/jena-fuseki2/jena-fuseki-ui/src/views/dataset/Upload.vue",n="b1c0ed05f97d10b806ac29a721d82ab92ebce308",t=new Function("return this")(),l="__coverage__",a={path:"/home/afs/ASF/Release/jena/target/checkout/jena-fuseki2/jena-fuseki-ui/src/views/dataset/Upload.vue",statementMap:{0:{start:{line:1,column:13},end:{line:2,column:1}},1:{start:{line:1,column:39},end:{line:1,column:43}},2:{start:{line:1,column:47},end:{line:1,column:59}},3:{start:{line:1,column:60},end:{line:1,column:5631}},4:{start:{line:1,column:1912},end:{line:1,column:1946}},5:{start:{line:1,column:1939},end:{line:1,column:1946}},6:{start:{line:1,column:1946},end:{line:1,column:1986}},7:{start:{line:1,column:2942},end:{line:1,column:2976}},8:{start:{line:1,column:3272},end:{line:1,column:3296}},9:{start:{line:1,column:3296},end:{line:1,column:3318}},10:{start:{line:1,column:3540},end:{line:1,column:3564}},11:{start:{line:1,column:3564},end:{line:1,column:3595}},12:{start:{line:1,column:4120},end:{line:1,column:4189}},13:{start:{line:1,column:4229},end:{line:1,column:4301}},14:{start:{line:1,column:4342},end:{line:1,column:4877}},15:{start:{line:1,column:4919},end:{line:1,column:5609}},16:{start:{line:1,column:5049},end:{line:1,column:5073}},17:{start:{line:1,column:5073},end:{line:1,column:5188}},18:{start:{line:1,column:5443},end:{line:1,column:5467}},19:{start:{line:1,column:5467},end:{line:1,column:5495}},20:{start:{line:3,column:22},end:{line:3,column:24}}},fnMap:{0:{name:"render",decl:{start:{line:1,column:22},end:{line:1,column:28}},loc:{start:{line:1,column:30},end:{line:2,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:1,column:1895},end:{line:1,column:1896}},loc:{start:{line:1,column:1911},end:{line:1,column:1987}},line:1},2:{name:"(anonymous_2)",decl:{start:{line:1,column:2926},end:{line:1,column:2927}},loc:{start:{line:1,column:2941},end:{line:1,column:2977}},line:1},3:{name:"(anonymous_3)",decl:{start:{line:1,column:3255},end:{line:1,column:3256}},loc:{start:{line:1,column:3271},end:{line:1,column:3319}},line:1},4:{name:"(anonymous_4)",decl:{start:{line:1,column:3523},end:{line:1,column:3524}},loc:{start:{line:1,column:3539},end:{line:1,column:3596}},line:1},5:{name:"(anonymous_5)",decl:{start:{line:1,column:4105},end:{line:1,column:4106}},loc:{start:{line:1,column:4119},end:{line:1,column:4190}},line:1},6:{name:"(anonymous_6)",decl:{start:{line:1,column:4214},end:{line:1,column:4215}},loc:{start:{line:1,column:4228},end:{line:1,column:4302}},line:1},7:{name:"(anonymous_7)",decl:{start:{line:1,column:4327},end:{line:1,column:4328}},loc:{start:{line:1,column:4341},end:{line:1,column:4878}},line:1},8:{name:"(anonymous_8)",decl:{start:{line:1,column:4904},end:{line:1,column:4905}},loc:{start:{line:1,column:4918},end:{line:1,column:5610}},line:1},9:{name:"(anonymous_9)",decl:{start:{line:1,column:5032},end:{line:1,column:5033}},loc:{start:{line:1,column:5048},end:{line:1,column:5189}},line:1},10:{name:"(anonymous_10)",decl:{start:{line:1,column:5426},end:{line:1,column:5427}},loc:{start:{line:1,column:5442},end:{line:1,column:5496}},line:1}},branchMap:{0:{loc:{start:{line:1,column:350},end:{line:1,column:5623}},type:"cond-expr",locations:[{start:{line:1,column:445},end:{line:1,column:654}},{start:{line:1,column:655},end:{line:1,column:5623}}],line:1},1:{loc:{start:{line:1,column:351},end:{line:1,column:443}},type:"binary-expr",locations:[{start:{line:1,column:351},end:{line:1,column:373}},{start:{line:1,column:378},end:{line:1,column:402}},{start:{line:1,column:406},end:{line:1,column:442}}],line:1},2:{loc:{start:{line:1,column:750},end:{line:1,column:797}},type:"binary-expr",locations:[{start:{line:1,column:750},end:{line:1,column:766}},{start:{line:1,column:770},end:{line:1,column:797}}],line:1},3:{loc:{start:{line:1,column:1912},end:{line:1,column:1946}},type:"if",locations:[{start:{line:1,column:1912},end:{line:1,column:1946}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:1},4:{loc:{start:{line:1,column:2629},end:{line:1,column:2649}},type:"binary-expr",locations:[{start:{line:1,column:2629},end:{line:1,column:2644}},{start:{line:1,column:2648},end:{line:1,column:2649}}],line:1},5:{loc:{start:{line:1,column:2659},end:{line:1,column:2734}},type:"cond-expr",locations:[{start:{line:1,column:2683},end:{line:1,column:2684}},{start:{line:1,column:2688},end:{line:1,column:2733}}],line:1},6:{loc:{start:{line:1,column:2688},end:{line:1,column:2733}},type:"cond-expr",locations:[{start:{line:1,column:2712},end:{line:1,column:2713}},{start:{line:1,column:2716},end:{line:1,column:2733}}],line:1},7:{loc:{start:{line:1,column:3114},end:{line:1,column:3713}},type:"cond-expr",locations:[{start:{line:1,column:3162},end:{line:1,column:3429}},{start:{line:1,column:3430},end:{line:1,column:3713}}],line:1},8:{loc:{start:{line:1,column:3115},end:{line:1,column:3160}},type:"binary-expr",locations:[{start:{line:1,column:3115},end:{line:1,column:3132}},{start:{line:1,column:3136},end:{line:1,column:3160}}],line:1},9:{loc:{start:{line:1,column:4707},end:{line:1,column:4876}},type:"cond-expr",locations:[{start:{line:1,column:4740},end:{line:1,column:4829}},{start:{line:1,column:4830},end:{line:1,column:4876}}],line:1},10:{loc:{start:{line:1,column:5073},end:{line:1,column:5188}},type:"cond-expr",locations:[{start:{line:1,column:5130},end:{line:1,column:5135}},{start:{line:1,column:5138},end:{line:1,column:5188}}],line:1},11:{loc:{start:{line:1,column:5073},end:{line:1,column:5127}},type:"binary-expr",locations:[{start:{line:1,column:5073},end:{line:1,column:5090}},{start:{line:1,column:5094},end:{line:1,column:5127}}],line:1}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b1c0ed05f97d10b806ac29a721d82ab92ebce308"},s=t[l]||(t[l]={});s[e]&&s[e].hash===n||(s[e]=a);var o=s[e];return i=function(){return o},o}t.r(n),t.d(n,{default:function(){return y}}),i(),i().s[0]++;var l=function(){i().f[0]++;var e=(i().s[1]++,this),n=(i().s[2]++,e._self._c);return i().s[3]++,n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row mt-4"},[n("div",{staticClass:"col-12"},[n("h2",[e._v("/"+e._s(this.datasetName))]),n("div",{staticClass:"card"},[n("nav",{staticClass:"card-header"},[n("Menu",{attrs:{"dataset-name":e.datasetName}})],1),(i().b[1][0]++,null===this.services||(i().b[1][1]++,this.services["gsp-rw"]&&(i().b[1][2]++,0!==this.services["gsp-rw"].length))?(i().b[0][1]++,n("div",{staticClass:"card-body"},[n("div",{directives:[{name:"show",rawName:"v-show",value:(i().b[2][0]++,e.$refs.upload&&(i().b[2][1]++,e.$refs.upload.dropActive)),expression:"$refs.upload && $refs.upload.dropActive"}],staticClass:"drop-active"},[n("h3",[e._v("Drop files to upload")])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("h3",[e._v("Upload files")]),n("p",[e._v("Load data into the default graph of the currently selected dataset, or the given named graph. You may upload any RDF format, such as Turtle, RDF/XML or TRiG.")]),n("form",{ref:"upload-form",attrs:{novalidate:""}},[n("div",{staticClass:"form-row form-group",attrs:{id:"dataset-graph-name-group",role:"group"}},[n("label",{staticClass:"col-sm-4 col-md-4 col-lg-2 col-12 col-form-label col-form-label-sm",attrs:{for:"dataset-graph-name"}},[e._v("Dataset graph name")]),n("div",{staticClass:"col input-group has-validation"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.datasetGraphName,expression:"datasetGraphName"}],ref:"dataset-graph-name",class:e.graphNameClasses,attrs:{id:"dataset-graph-name",type:"text",placeholder:"Leave blank for default graph"},domProps:{value:e.datasetGraphName},on:{input:function(n){if(i().f[1]++,i().s[4]++,n.target.composing)return i().b[3][0]++,void i().s[5]++;i().b[3][1]++,i().s[6]++,e.datasetGraphName=n.target.value}}}),n("div",{staticClass:"invalid-feedback"},[e._v(" Invalid graph name. Please remove any spaces. ")])])]),n("div",{staticClass:"form-row form-group",attrs:{id:"dataset-files",role:"group"}},[n("label",{staticClass:"col-sm-4 col-md-4 col-lg-2 col-12 col-form-label col-form-label-sm",attrs:{for:"add-files-action-dropdown"}},[e._v("Files to upload")]),n("div",{staticClass:"col has-validation"},[n("file-upload",{ref:"upload",class:e.fileUploadClasses,attrs:{"post-action":e.postActionUrl,extensions:e.upload.extensions,accept:e.upload.accept,multiple:e.upload.multiple,directory:e.upload.directory,size:(i().b[4][0]++,e.upload.size||(i().b[4][1]++,0)),thread:e.upload.thread<1?(i().b[5][0]++,1):(i().b[5][1]++,e.upload.thread>5?(i().b[6][0]++,5):(i().b[6][1]++,e.upload.thread)),headers:e.upload.headers,data:e.upload.data,drop:e.upload.drop,"drop-directory":e.upload.dropDirectory,"add-index":e.upload.addIndex},model:{value:e.upload.files,callback:function(n){i().f[2]++,i().s[7]++,e.$set(e.upload,"files",n)},expression:"upload.files"}},[n("FontAwesomeIcon",{attrs:{icon:"plus"}}),n("span",{staticClass:"ms-2"},[e._v("select files")])],1),(i().b[8][0]++,e.$refs.upload&&(i().b[8][1]++,e.$refs.upload.active)?(i().b[7][1]++,n("button",{staticClass:"btn btn-primary ms-2 d-inline",attrs:{type:"button"},on:{click:function(n){i().f[4]++,i().s[10]++,n.preventDefault(),i().s[11]++,e.$refs.upload.active=!1}}},[n("FontAwesomeIcon",{attrs:{icon:"times-circle"}}),n("span",{staticClass:"ms-2"},[e._v("stop upload")])],1)):(i().b[7][0]++,n("button",{staticClass:"btn btn-primary ms-2 d-inline",attrs:{type:"button"},on:{click:function(n){return i().f[3]++,i().s[8]++,n.preventDefault(),i().s[9]++,e.uploadAll()}}},[n("FontAwesomeIcon",{attrs:{icon:"upload"}}),n("span",{staticClass:"ms-2"},[e._v("upload all")])],1))),n("div",{staticClass:"invalid-feedback"},[e._v(" Invalid upload files. Please select at least one file to upload. ")])],1)])])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("jena-table",{attrs:{fields:e.datasetTableFields,items:e.datasetTableItems,"empty-text":"No files selected",bordered:"",fixed:"",hover:""},scopedSlots:e._u([{key:"cell(size)",fn:function(n){return i().f[5]++,i().s[12]++,[e._v(" "+e._s(e.readableFileSize(n.item.size))+" ")]}},{key:"cell(speed)",fn:function(n){return i().f[6]++,i().s[13]++,[e._v(" "+e._s(e.readableFileSize(n.item.speed))+"/s ")]}},{key:"cell(status)",fn:function(t){return i().f[7]++,i().s[14]++,[n("div",{staticClass:"progress"},[n("div",{class:`progress-bar bg-${e.getFileStatus(t.item)}`,style:`width: ${t.item.progress}%`,attrs:{"aria-valuenow":`${t.item.progress}`,"aria-valuemin":"0","aria-valuemax":"100",role:"progressbar"}},[e._v(e._s(t.item.progress))])]),n("span",{staticClass:"small"},[e._v("Triples uploaded:Â ")]),t.item.response.tripleCount?(i().b[9][0]++,n("span",{staticClass:"small"},[e._v(" "+e._s(t.item.response.tripleCount)+" ")])):(i().b[9][1]++,n("span",{staticClass:"small"},[e._v("0")]))]}},{key:"cell(actions)",fn:function(t){return i().f[8]++,i().s[15]++,[n("button",{staticClass:"btn btn-outline-primary me-0 mb-2 d-block",attrs:{type:"button"},on:{click:function(n){i().f[9]++,i().s[16]++,n.preventDefault(),i().s[17]++,i().b[11][0]++,t.item.success||(i().b[11][1]++,"compressing"===t.item.error)?i().b[10][0]++:(i().b[10][1]++,e.$refs.upload.update(t.item,{active:!0}))}}},[n("FontAwesomeIcon",{attrs:{icon:"upload"}}),n("span",{staticClass:"ms-2"},[e._v("upload now")])],1),n("button",{staticClass:"btn btn-outline-primary me-0 mb-md-0 d-block d-md-inline-block",attrs:{type:"button"},on:{click:function(n){return i().f[10]++,i().s[18]++,n.preventDefault(),i().s[19]++,e.remove(t.item)}}},[n("FontAwesomeIcon",{attrs:{icon:"minus-circle"}}),n("span",{staticClass:"ms-2"},[e._v("remove")])],1)]}}])})],1)])])):(i().b[0][0]++,n("div",{staticClass:"card-body"},[n("div",{staticClass:"alert alert-warning"},[e._v("No service for adding data available. The Graph Store Protocol service should be configured to allow adding data.")])])))])])])])},a=(i().s[20]++,[]),s=t(8465),o=t(2948),r=t.n(o),c=t(4835),u=t(8947),d=t(1436),m=t(7810),p=t(3936);function f(){var e="/home/afs/ASF/Release/jena/target/checkout/jena-fuseki2/jena-fuseki-ui/src/views/dataset/Upload.vue",n="144f5cfb0ffc058575ed452351390370e39a456f",t=new Function("return this")(),i="__coverage__",l={path:"/home/afs/ASF/Release/jena/target/checkout/jena-fuseki2/jena-fuseki-ui/src/views/dataset/Upload.vue",statementMap:{0:{start:{line:10,column:0},end:{line:10,column:59}},1:{start:{line:27,column:4},end:{line:92,column:5}},2:{start:{line:97,column:6},end:{line:99,column:7}},3:{start:{line:98,column:8},end:{line:98,column:17}},4:{start:{line:100,column:6},end:{line:105,column:10}},5:{start:{line:102,column:10},end:{line:104,column:12}},6:{start:{line:108,column:6},end:{line:110,column:7}},7:{start:{line:109,column:8},end:{line:109,column:17}},8:{start:{line:111,column:21},end:{line:111,column:117}},9:{start:{line:112,column:27},end:{line:112,column:107}},10:{start:{line:112,column:85},end:{line:112,column:100}},11:{start:{line:113,column:6},end:{line:113,column:94}},12:{start:{line:119,column:6},end:{line:119,column:30}},13:{start:{line:123,column:8},end:{line:123,column:28}},14:{start:{line:132,column:6},end:{line:136,column:7}},15:{start:{line:134,column:8},end:{line:134,column:27}},16:{start:{line:135,column:8},end:{line:135,column:23}},17:{start:{line:137,column:6},end:{line:139,column:7}},18:{start:{line:138,column:8},end:{line:138,column:24}},19:{start:{line:140,column:6},end:{line:142,column:7}},20:{start:{line:141,column:8},end:{line:141,column:24}},21:{start:{line:143,column:6},end:{line:143,column:15}},22:{start:{line:146,column:6},end:{line:146,column:36}},23:{start:{line:156,column:16},end:{line:156,column:20}},24:{start:{line:157,column:16},end:{line:157,column:21}},25:{start:{line:159,column:6},end:{line:165,column:7}},26:{start:{line:160,column:8},end:{line:160,column:65}},27:{start:{line:161,column:13},end:{line:165,column:7}},28:{start:{line:162,column:8},end:{line:162,column:65}},29:{start:{line:164,column:8},end:{line:164,column:30}},30:{start:{line:168,column:6},end:{line:170,column:7}},31:{start:{line:169,column:8},end:{line:169,column:39}},32:{start:{line:173,column:6},end:{line:173,column:61}},33:{start:{line:177,column:22},end:{line:177,column:32}},34:{start:{line:178,column:24},end:{line:178,column:62}},35:{start:{line:179,column:6},end:{line:182,column:7}},36:{start:{line:180,column:8},end:{line:180,column:57}},37:{start:{line:181,column:8},end:{line:181,column:19}},38:{start:{line:183,column:6},end:{line:183,column:57}},39:{start:{line:184,column:6},end:{line:184,column:18}},40:{start:{line:187,column:6},end:{line:194,column:7}},41:{start:{line:188,column:8},end:{line:192,column:9}},42:{start:{line:193,column:8},end:{line:193,column:19}},43:{start:{line:195,column:6},end:{line:199,column:7}},44:{start:{line:200,column:6},end:{line:200,column:18}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:10},end:{line:93,column:3}},line:26},1:{name:"(anonymous_1)",decl:{start:{line:96,column:4},end:{line:96,column:5}},loc:{start:{line:96,column:25},end:{line:106,column:5}},line:96},2:{name:"(anonymous_2)",decl:{start:{line:101,column:13},end:{line:101,column:14}},loc:{start:{line:101,column:21},end:{line:105,column:9}},line:101},3:{name:"(anonymous_3)",decl:{start:{line:107,column:4},end:{line:107,column:5}},loc:{start:{line:107,column:21},end:{line:114,column:5}},line:107},4:{name:"(anonymous_4)",decl:{start:{line:112,column:73},end:{line:112,column:74}},loc:{start:{line:112,column:85},end:{line:112,column:100}},line:112},5:{name:"(anonymous_5)",decl:{start:{line:118,column:4},end:{line:118,column:5}},loc:{start:{line:118,column:24},end:{line:120,column:5}},line:118},6:{name:"(anonymous_6)",decl:{start:{line:122,column:6},end:{line:122,column:7}},loc:{start:{line:122,column:17},end:{line:124,column:7}},line:122},7:{name:"(anonymous_7)",decl:{start:{line:131,column:4},end:{line:131,column:5}},loc:{start:{line:131,column:25},end:{line:144,column:5}},line:131},8:{name:"(anonymous_8)",decl:{start:{line:145,column:4},end:{line:145,column:5}},loc:{start:{line:145,column:18},end:{line:147,column:5}},line:145},9:{name:"(anonymous_9)",decl:{start:{line:155,column:22},end:{line:155,column:23}},loc:{start:{line:155,column:38},end:{line:166,column:5}},line:155},10:{name:"(anonymous_10)",decl:{start:{line:167,column:4},end:{line:167,column:5}},loc:{start:{line:167,column:17},end:{line:171,column:5}},line:167},11:{name:"(anonymous_11)",decl:{start:{line:172,column:4},end:{line:172,column:5}},loc:{start:{line:172,column:20},end:{line:174,column:5}},line:172},12:{name:"(anonymous_12)",decl:{start:{line:175,column:4},end:{line:175,column:5}},loc:{start:{line:175,column:25},end:{line:185,column:5}},line:175},13:{name:"(anonymous_13)",decl:{start:{line:186,column:4},end:{line:186,column:5}},loc:{start:{line:186,column:21},end:{line:201,column:5}},line:186}},branchMap:{0:{loc:{start:{line:97,column:6},end:{line:99,column:7}},type:"if",locations:[{start:{line:97,column:6},end:{line:99,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},1:{loc:{start:{line:108,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:108,column:6},end:{line:110,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:108},2:{loc:{start:{line:108,column:10},end:{line:108,column:100}},type:"binary-expr",locations:[{start:{line:108,column:10},end:{line:108,column:32}},{start:{line:108,column:36},end:{line:108,column:60}},{start:{line:108,column:64},end:{line:108,column:100}}],line:108},3:{loc:{start:{line:111,column:21},end:{line:111,column:117}},type:"cond-expr",locations:[{start:{line:111,column:79},end:{line:111,column:112}},{start:{line:111,column:115},end:{line:111,column:117}}],line:111},4:{loc:{start:{line:111,column:22},end:{line:111,column:75}},type:"binary-expr",locations:[{start:{line:111,column:22},end:{line:111,column:43}},{start:{line:111,column:47},end:{line:111,column:75}}],line:111},5:{loc:{start:{line:112,column:27},end:{line:112,column:107}},type:"binary-expr",locations:[{start:{line:112,column:27},end:{line:112,column:101}},{start:{line:112,column:105},end:{line:112,column:107}}],line:112},6:{loc:{start:{line:132,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:132,column:6},end:{line:136,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:132},7:{loc:{start:{line:137,column:6},end:{line:139,column:7}},type:"if",locations:[{start:{line:137,column:6},end:{line:139,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},8:{loc:{start:{line:140,column:6},end:{line:142,column:7}},type:"if",locations:[{start:{line:140,column:6},end:{line:142,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:140},9:{loc:{start:{line:159,column:6},end:{line:165,column:7}},type:"if",locations:[{start:{line:159,column:6},end:{line:165,column:7}},{start:{line:161,column:13},end:{line:165,column:7}}],line:159},10:{loc:{start:{line:161,column:13},end:{line:165,column:7}},type:"if",locations:[{start:{line:161,column:13},end:{line:165,column:7}},{start:{line:163,column:13},end:{line:165,column:7}}],line:161},11:{loc:{start:{line:168,column:6},end:{line:170,column:7}},type:"if",locations:[{start:{line:168,column:6},end:{line:170,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:168},12:{loc:{start:{line:173,column:13},end:{line:173,column:61}},type:"binary-expr",locations:[{start:{line:173,column:13},end:{line:173,column:37}},{start:{line:173,column:41},end:{line:173,column:61}}],line:173},13:{loc:{start:{line:179,column:6},end:{line:182,column:7}},type:"if",locations:[{start:{line:179,column:6},end:{line:182,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:179},14:{loc:{start:{line:179,column:10},end:{line:179,column:53}},type:"binary-expr",locations:[{start:{line:179,column:10},end:{line:179,column:26}},{start:{line:179,column:30},end:{line:179,column:53}}],line:179},15:{loc:{start:{line:187,column:6},end:{line:194,column:7}},type:"if",locations:[{start:{line:187,column:6},end:{line:194,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:187},16:{loc:{start:{line:187,column:10},end:{line:187,column:68}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:36}},{start:{line:187,column:40},end:{line:187,column:68}}],line:187}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0]},inputSourceMap:{version:3,sources:["Upload.vue"],names:[],mappings:";AAkLA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",file:"Upload.vue",sourceRoot:"src/views/dataset",sourcesContent:['\x3c!--\n   Licensed to the Apache Software Foundation (ASF) under one or more\n   contributor license agreements.  See the NOTICE file distributed with\n   this work for additional information regarding copyright ownership.\n   The ASF licenses this file to You under the Apache License, Version 2.0\n   (the "License"); you may not use this file except in compliance with\n   the License.  You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an "AS IS" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n--\x3e\n\n<template>\n  <div class="container-fluid">\n    <div class="row mt-4">\n      <div class="col-12">\n        <h2>/{{ this.datasetName }}</h2>\n        <div class="card">\n          <nav class="card-header">\n            <Menu :dataset-name="datasetName" />\n          </nav>\n          <div class="card-body" v-if="this.services !== null && (!this.services[\'gsp-rw\'] || this.services[\'gsp-rw\'].length === 0)">\n            <div class="alert alert-warning">No service for adding data available. The Graph Store Protocol service should be configured to allow adding data.</div>\n          </div>\n          <div class="card-body" v-else>\n            <div v-show="$refs.upload && $refs.upload.dropActive" class="drop-active">\n              <h3>Drop files to upload</h3>\n            </div>\n            <div class="row">\n              <div class="col-sm-12">\n                <h3>Upload files</h3>\n                <p>Load data into the default graph of the currently selected dataset, or the given named graph.\n                  You may upload any RDF format, such as Turtle, RDF/XML or TRiG.</p>\n                <form ref="upload-form" novalidate>\n                  <div\n                    id="dataset-graph-name-group"\n                    role="group"\n                    class="form-row form-group"\n                  >\n                    <label\n                      for="dataset-graph-name"\n                      class="col-sm-4 col-md-4 col-lg-2 col-12 col-form-label col-form-label-sm"\n                    >Dataset graph name</label>\n                    <div class="col input-group has-validation">\n                      <input\n                        v-model="datasetGraphName"\n                        :class="graphNameClasses"\n                        id="dataset-graph-name"\n                        ref="dataset-graph-name"\n                        type="text"\n                        placeholder="Leave blank for default graph"\n                      />\n                      <div class="invalid-feedback">\n                        Invalid graph name. Please remove any spaces.\n                      </div>\n                    </div>\n                  </div>\n                  <div\n                    id="dataset-files"\n                    role="group"\n                    class="form-row form-group"\n                  >\n                    <label\n                      for="add-files-action-dropdown"\n                      class="col-sm-4 col-md-4 col-lg-2 col-12 col-form-label col-form-label-sm"\n                    >Files to upload</label>\n                    <div class="col has-validation">\n                      <file-upload\n                        ref="upload"\n                        v-model="upload.files"\n                        :post-action="postActionUrl"\n                        :extensions="upload.extensions"\n                        :accept="upload.accept"\n                        :multiple="upload.multiple"\n                        :directory="upload.directory"\n                        :size="upload.size || 0"\n                        :thread="upload.thread < 1 ? 1 : (upload.thread > 5 ? 5 : upload.thread)"\n                        :headers="upload.headers"\n                        :data="upload.data"\n                        :drop="upload.drop"\n                        :drop-directory="upload.dropDirectory"\n                        :add-index="upload.addIndex"\n                        :class="fileUploadClasses"\n                      >\n                        <FontAwesomeIcon icon="plus" />\n                        <span class="ms-2">select files</span>\n                      </file-upload>\n                      <button\n                        v-if="!$refs.upload || !$refs.upload.active"\n                        @click.prevent="uploadAll()"\n                        type="button"\n                        class="btn btn-primary ms-2 d-inline">\n                        <FontAwesomeIcon icon="upload" />\n                        <span class="ms-2">upload all</span>\n                      </button>\n                      <button\n                        v-else\n                        @click.prevent="$refs.upload.active = false"\n                        type="button"\n                        class="btn btn-primary ms-2 d-inline">\n                        <FontAwesomeIcon icon="times-circle" />\n                        <span class="ms-2">stop upload</span>\n                      </button>\n                      <div class="invalid-feedback">\n                        Invalid upload files. Please select at least one file to upload.\n                      </div>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col">\n                <jena-table\n                  :fields="datasetTableFields"\n                  :items="datasetTableItems"\n                  empty-text="No files selected"\n                  bordered\n                  fixed\n                  hover\n                >\n                  <template v-slot:cell(size)="data">\n                    {{ readableFileSize(data.item.size) }}\n                  </template>\n                  <template v-slot:cell(speed)="data">\n                    {{ readableFileSize(data.item.speed) }}/s\n                  </template>\n                  <template v-slot:cell(status)="data">\n                    <div class="progress">\n                      <div\n                        :class="`progress-bar bg-${getFileStatus(data.item)}`"\n                        :style="`width: ${data.item.progress}%`"\n                        :aria-valuenow="`${data.item.progress}`"\n                        aria-valuemin="0"\n                        aria-valuemax="100"\n                        role="progressbar"\n                      >{{ data.item.progress }}</div>\n                    </div>\n                    <span class="small">Triples uploaded:&nbsp;</span>\n                    <span v-if="data.item.response.tripleCount" class="small">\n                      {{ data.item.response.tripleCount }}\n                    </span>\n                    <span v-else class="small">0</span>\n                  </template>\n                  <template v-slot:cell(actions)="data">\n                    <button\n                      @click.prevent="data.item.success || data.item.error === \'compressing\' ? false : $refs.upload.update(data.item, {active: true})"\n                      type="button"\n                      class="btn btn-outline-primary me-0 mb-2 d-block"\n                    >\n                      <FontAwesomeIcon icon="upload" />\n                      <span class="ms-2">upload now</span>\n                    </button>\n                    <button\n                      @click.prevent="remove(data.item)"\n                      type="button"\n                      class="btn btn-outline-primary me-0 mb-md-0 d-block d-md-inline-block"\n                    >\n                      <FontAwesomeIcon icon="minus-circle" />\n                      <span class="ms-2">remove</span>\n                    </button>\n                  </template>\n                </jena-table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Menu from \'@/components/dataset/Menu\'\nimport FileUpload from \'vue-upload-component\'\nimport JenaTable from \'@/components/dataset/JenaTable\'\nimport { library } from \'@fortawesome/fontawesome-svg-core\'\nimport { faPlus, faUpload, faTimesCircle, faMinusCircle } from \'@fortawesome/free-solid-svg-icons\'\nimport { FontAwesomeIcon } from \'@fortawesome/vue-fontawesome\'\nimport currentDatasetMixin from \'@/mixins/current-dataset\'\n\nlibrary.add(faPlus, faUpload, faTimesCircle, faMinusCircle)\n\nexport default {\n  name: \'DatasetUpload\',\n\n  components: {\n    Menu,\n    FontAwesomeIcon,\n    FileUpload,\n    JenaTable\n  },\n\n  mixins: [\n    currentDatasetMixin\n  ],\n\n  data () {\n    return {\n      datasetGraphName: null,\n      datasetFiles: null,\n      graphNameClasses: [\n        \'form-control\'\n      ],\n      fileUploadClasses: [\n        \'btn\',\n        \'btn-success\'\n      ],\n      upload: {\n        files: [],\n        accept: \'\', // e.g. \'ttl,xml,rdf,...\'\n        minSize: 0,\n        // size: 1024 * 1024 * 10,\n        multiple: true,\n        directory: false,\n        drop: true,\n        dropDirectory: true,\n        addIndex: false,\n        thread: 3,\n        name: \'file\',\n        headers: { // e.g. CSRF headers\n        },\n        data: {},\n        autoCompress: 1024 * 1024,\n        uploadAuto: false,\n        isOption: false\n        // addData: {\n        //   show: false,\n        //   name: \'\',\n        //   type: \'\',\n        //   content: \'\'\n        // },\n        // editFile: {\n        //   show: false,\n        //   name: \'\'\n        // }\n      },\n      datasetTableFields: [\n        {\n          key: \'name\',\n          label: \'name\',\n          sortable: true,\n          sortDirection: \'asc\'\n        },\n        {\n          key: \'size\',\n          label: \'size\',\n          sortable: true,\n          sortDirection: \'asc\'\n        },\n        {\n          key: \'speed\',\n          label: \'speed\'\n        },\n        {\n          key: \'status\',\n          label: \'status\'\n        },\n        {\n          key: \'actions\',\n          label: \'actions\'\n        }\n      ]\n    }\n  },\n\n  computed: {\n    datasetTableItems () {\n      if (!this.upload.files) {\n        return []\n      }\n      return this.upload.files\n        .map(file => {\n          return Object.assign(file, {\n            status: this.getFileStatus(file)\n          })\n        })\n    },\n    postActionUrl () {\n      if (this.services === null || !this.services[\'gsp-rw\'] || this.services[\'gsp-rw\'].length === 0) {\n        return \'\'\n      }\n      const params = (this.datasetGraphName && this.datasetGraphName !== \'\') ? `?graph=${this.datasetGraphName}` : \'\'\n      const dataEndpoint = this.services[\'gsp-rw\'][\'srv.endpoints\'].find(endpoint => endpoint !== \'\') || \'\'\n      return this.$fusekiService.getFusekiUrl(`/${this.datasetName}/${dataEndpoint}${params}`)\n    }\n  },\n\n  watch: {\n    datasetGraphName () {\n      this.validateGraphName()\n    },\n    upload: {\n      handler () {\n        this.validateFiles()\n      },\n      deep: true,\n      immediate: false\n    }\n  },\n\n  methods: {\n    getFileStatus (file) {\n      if (file.error) {\n        // eslint-disable-next-line no-console\n        console.error(file)\n        return \'danger\'\n      }\n      if (file.success) {\n        return \'success\'\n      }\n      if (file.active) {\n        return \'warning\'\n      }\n      return \'\'\n    },\n    remove (file) {\n      this.$refs.upload.remove(file)\n    },\n    /**\n     * Return file size in bytes in a human-readable form.\n     *\n     * Copied from the Backbone.js code with modifications.\n     *\n     * Replaced sprintf usage by .toFixed(2).\n     */\n    readableFileSize: function (size) {\n      const k = 1024\n      const m = k * k\n\n      if (size >= m) {\n        return `${(size / m).toFixed(2).replace(/\\.?0*$/, \'\')}mb`\n      } else if (size >= k) {\n        return `${(size / k).toFixed(2).replace(/\\.?0*$/, \'\')}kb`\n      } else {\n        return `${size} bytes`\n      }\n    },\n    uploadAll () {\n      if (this.validateForm()) {\n        this.$refs.upload.active = true\n      }\n    },\n    validateForm () {\n      return this.validateGraphName() && this.validateFiles()\n    },\n    validateGraphName () {\n      // No spaces allowed in graph names.\n      const pattern = /^[^\\s]+$/\n      const graphName = this.$refs[\'dataset-graph-name\'].value\n      if (graphName === \'\' || pattern.test(graphName)) {\n        this.graphNameClasses = [\'form-control is-valid\']\n        return true\n      }\n      this.graphNameClasses = [\'form-control is-invalid\']\n      return false\n    },\n    validateFiles () {\n      if (this.upload.files !== null && this.upload.files.length > 0) {\n        this.fileUploadClasses = [\n          \'btn\',\n          \'btn-success\',\n          \'is-valid\'\n        ]\n        return true\n      }\n      this.fileUploadClasses = [\n        \'btn\',\n        \'btn-success\',\n        \'is-invalid\'\n      ]\n      return false\n    }\n  }\n}\n<\/script>\n']},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"144f5cfb0ffc058575ed452351390370e39a456f"},a=t[i]||(t[i]={});a[e]&&a[e].hash===n||(a[e]=l);var s=a[e];return f=function(){return s},s}f(),f().s[0]++,u.vI.add(d.r8p,d.cf$,d.nYk,d.uMC);var h={name:"DatasetUpload",components:{Menu:s.Z,FontAwesomeIcon:m.GN,FileUpload:r(),JenaTable:c.Z},mixins:[p.Z],data(){return f().f[0]++,f().s[1]++,{datasetGraphName:null,datasetFiles:null,graphNameClasses:["form-control"],fileUploadClasses:["btn","btn-success"],upload:{files:[],accept:"",minSize:0,multiple:!0,directory:!1,drop:!0,dropDirectory:!0,addIndex:!1,thread:3,name:"file",headers:{},data:{},autoCompress:1048576,uploadAuto:!1,isOption:!1},datasetTableFields:[{key:"name",label:"name",sortable:!0,sortDirection:"asc"},{key:"size",label:"size",sortable:!0,sortDirection:"asc"},{key:"speed",label:"speed"},{key:"status",label:"status"},{key:"actions",label:"actions"}]}},computed:{datasetTableItems(){return f().f[1]++,f().s[2]++,this.upload.files?(f().b[0][1]++,f().s[4]++,this.upload.files.map((e=>(f().f[2]++,f().s[5]++,Object.assign(e,{status:this.getFileStatus(e)}))))):(f().b[0][0]++,f().s[3]++,[])},postActionUrl(){if(f().f[3]++,f().s[6]++,f().b[2][0]++,null===this.services||(f().b[2][1]++,!this.services["gsp-rw"])||(f().b[2][2]++,0===this.services["gsp-rw"].length))return f().b[1][0]++,f().s[7]++,"";f().b[1][1]++;const e=(f().s[8]++,f().b[4][0]++,this.datasetGraphName&&(f().b[4][1]++,""!==this.datasetGraphName)?(f().b[3][0]++,`?graph=${this.datasetGraphName}`):(f().b[3][1]++,"")),n=(f().s[9]++,f().b[5][0]++,this.services["gsp-rw"]["srv.endpoints"].find((e=>(f().f[4]++,f().s[10]++,""!==e)))||(f().b[5][1]++,""));return f().s[11]++,this.$fusekiService.getFusekiUrl(`/${this.datasetName}/${n}${e}`)}},watch:{datasetGraphName(){f().f[5]++,f().s[12]++,this.validateGraphName()},upload:{handler(){f().f[6]++,f().s[13]++,this.validateFiles()},deep:!0,immediate:!1}},methods:{getFileStatus(e){return f().f[7]++,f().s[14]++,e.error?(f().b[6][0]++,f().s[15]++,console.error(e),f().s[16]++,"danger"):(f().b[6][1]++,f().s[17]++,e.success?(f().b[7][0]++,f().s[18]++,"success"):(f().b[7][1]++,f().s[19]++,e.active?(f().b[8][0]++,f().s[20]++,"warning"):(f().b[8][1]++,f().s[21]++,"")))},remove(e){f().f[8]++,f().s[22]++,this.$refs.upload.remove(e)},readableFileSize:function(e){f().f[9]++;const n=(f().s[23]++,1024),t=(f().s[24]++,n*n);return f().s[25]++,e>=t?(f().b[9][0]++,f().s[26]++,`${(e/t).toFixed(2).replace(/\.?0*$/,"")}mb`):(f().b[9][1]++,f().s[27]++,e>=n?(f().b[10][0]++,f().s[28]++,`${(e/n).toFixed(2).replace(/\.?0*$/,"")}kb`):(f().b[10][1]++,f().s[29]++,`${e} bytes`))},uploadAll(){f().f[10]++,f().s[30]++,this.validateForm()?(f().b[11][0]++,f().s[31]++,this.$refs.upload.active=!0):f().b[11][1]++},validateForm(){return f().f[11]++,f().s[32]++,f().b[12][0]++,this.validateGraphName()&&(f().b[12][1]++,this.validateFiles())},validateGraphName(){f().f[12]++;const e=(f().s[33]++,/^[^\s]+$/),n=(f().s[34]++,this.$refs["dataset-graph-name"].value);return f().s[35]++,f().b[14][0]++,""===n||(f().b[14][1]++,e.test(n))?(f().b[13][0]++,f().s[36]++,this.graphNameClasses=["form-control is-valid"],f().s[37]++,!0):(f().b[13][1]++,f().s[38]++,this.graphNameClasses=["form-control is-invalid"],f().s[39]++,!1)},validateFiles(){return f().f[13]++,f().s[40]++,f().b[16][0]++,null!==this.upload.files&&(f().b[16][1]++,this.upload.files.length>0)?(f().b[15][0]++,f().s[41]++,this.fileUploadClasses=["btn","btn-success","is-valid"],f().s[42]++,!0):(f().b[15][1]++,f().s[43]++,this.fileUploadClasses=["btn","btn-success","is-invalid"],f().s[44]++,!1)}}},A=h,v=t(1001),b=(0,v.Z)(A,l,a,!1,null,null,null),y=b.exports},2948:function(e){
/*!
 * Name: vue-upload-component
 * Version: 2.8.21
 * Author: Marco Lang
 */
(function(n,t){e.exports=t()})(0,(function(){"use strict";var e=function(e){var n=new XMLHttpRequest;return n.open(e.method||"GET",e.url),n.responseType="json",e.headers&&Object.keys(e.headers).forEach((function(t){n.setRequestHeader(t,e.headers[t])})),n},n=function(e,n){return new Promise((function(t,i){e.onload=function(){if(e.status>=200&&e.status<300){var n;try{n=JSON.parse(e.response)}catch(l){n=e.response}t(n)}else i(e.response)},e.onerror=function(){return i(e.response)},e.send(JSON.stringify(n))}))},t=function(e,n){var t=new FormData;for(var i in n)t.append(i,n[i]);return new Promise((function(n,i){e.onload=function(){if(e.status>=200&&e.status<300){var t;try{t=JSON.parse(e.response)}catch(l){t=e.response}n(t)}else i(e.response)},e.onerror=function(){return i(e.response)},e.send(t)}))};function i(t){var i=e(t);return n(i,t.body)}var l=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var s=function(){function n(e,t){a(this,n),this.file=e,this.options=t,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return l(n,[{key:"createChunks",value:function(){this.chunks=[];var e=0,n=this.chunkSize;while(e<this.fileSize)this.chunks.push({blob:this.file.file.slice(e,n),startOffset:e,active:!1,retries:this.maxRetries}),e=n,n=e+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach((function(e){e.xhr.abort(),e.active=!1})),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var e=this;return this.promise=new Promise((function(n,t){e.resolve=n,e.reject=t})),this.start(),this.promise}},{key:"start",value:function(){var e=this;i({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then((function(n){if("success"!==n.status)return e.file.response=n,e.reject("server");e.sessionId=n.data.session_id,e.chunkSize=n.data.end_offset,e.createChunks(),e.startChunking()})).catch((function(n){e.file.response=n,e.reject("server")}))}},{key:"startChunking",value:function(){for(var e=0;e<this.maxActiveChunks;e++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(0===this.chunksUploading.length)return this.finish()}}},{key:"uploadChunk",value:function(n){var i=this;n.progress=0,n.active=!0,this.updateFileProgress(),n.xhr=e({method:"POST",headers:this.headers,url:this.action}),n.xhr.upload.addEventListener("progress",(function(e){e.lengthComputable&&(n.progress=Math.round(e.loaded/e.total*100))}),!1),t(n.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:n.startOffset,chunk:n.blob})).then((function(e){if(n.active=!1,"success"===e.status)n.uploaded=!0;else if(n.retries--<=0)return i.stopChunks(),i.reject("upload");i.uploadNextChunk()})).catch((function(){if(n.active=!1,n.retries--<=0)return i.stopChunks(),i.reject("upload");i.uploadNextChunk()}))}},{key:"finish",value:function(){var e=this;this.updateFileProgress(),this.stopSpeedCalc(),i({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then((function(n){if(e.file.response=n,"success"!==n.status)return e.reject("server");e.resolve(n)})).catch((function(n){e.file.response=n,e.reject("server")}))}},{key:"startSpeedCalc",value:function(){var e=this;this.file.speed=0;var n=0;this.speedInterval||(this.speedInterval=window.setInterval((function(){var t=e.progress/100*e.fileSize;e.file.speed=t-n,n=t}),1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}},{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var e=this,n=this.chunksUploaded.length/this.chunks.length*100,t=this.chunksUploading.reduce((function(n,t){return n+(0|t.progress)/e.chunks.length}),0);return Math.min(n+t,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter((function(e){return!e.active&&!e.uploaded}))}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter((function(e){return!!e.xhr&&!!e.active}))}},{key:"chunksUploaded",get:function(){return this.chunks.filter((function(e){return!!e.uploaded}))}}]),n}(),o={methods:{change:function(e){this.$parent.addInputFile(e.target),e.target.files?(e.target.value="",e.target.files.length&&!/safari/i.test(navigator.userAgent)&&(e.target.type="",e.target.type="file")):(this.$destroy(),new this.constructor({parent:this.$parent,el:this.$el}))}}};function r(e,n,t,i,l,a,s,o,r,c){"boolean"!==typeof s&&(r=o,o=s,s=!1);var u,d="function"===typeof t?t.options:t;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,l&&(d.functional=!0)),i&&(d._scopeId=i),a?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=u):n&&(u=s?function(){n.call(this,c(this.$root.$options.shadowRoot))}:function(e){n.call(this,o(e))}),u)if(d.functional){var m=d.render;d.render=function(e,n){return u.call(n),m(e,n)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,u):[u]}return t}var c=r,u=o,d=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("input",{attrs:{type:"file",name:e.$parent.name,id:e.$parent.inputId||e.$parent.name,accept:e.$parent.accept,capture:e.$parent.capture,disabled:e.$parent.disabled,webkitdirectory:e.$parent.directory&&e.$parent.features.directory,directory:e.$parent.directory&&e.$parent.features.directory,multiple:e.$parent.multiple&&e.$parent.features.html5},on:{change:e.change}})},m=[],p=void 0,f=void 0,h=void 0,A=!1,v=c({render:d,staticRenderFns:m},p,u,f,A,h,void 0,void 0),b=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function g(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var C={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:s},k={components:{InputFile:v},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{},multiple:{type:Boolean},maximum:{type:Number,default:function(){return this.multiple?0:1}},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:Object},data:{type:Object,default:Object},timeout:{type:Number,default:0},drop:{default:!1},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{default:Array},value:{type:Array,default:Array},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return C}}},data:function(){return{files:this.value,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,uploading:0,destroy:!1}},mounted:function(){var e=document.createElement("input");if(e.type="file",e.multiple=!0,window.FormData&&e.files?("boolean"!==typeof e.webkitdirectory&&"boolean"!==typeof e.directory||(this.features.directory=!0),this.features.html5&&"undefined"!==typeof e.ondrop&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var n=0;n<this.files.length;n++){var t=this.files[n];this.maps[t.id]=t}this.$nextTick((function(){var e=this;this.$parent?(this.$parent.$forceUpdate(),this.$parent.$nextTick((function(){e.watchDrop(e.drop)}))):this.watchDrop(this.drop)}))},beforeDestroy:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1)},computed:{uploaded:function(){for(var e=void 0,n=0;n<this.files.length;n++)if(e=this.files[n],e.fileObject&&!e.error&&!e.success)return!1;return!0},chunkOptions:function(){return Object.assign(C,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]}},watch:{active:function(e){this.watchActive(e)},dropActive:function(){this.$parent&&this.$parent.$forceUpdate()},drop:function(e){this.watchDrop(e)},value:function(e){if(this.files!==e){this.files=e;var n=this.maps;this.maps={};for(var t=0;t<this.files.length;t++){var i=this.files[t];this.maps[i.id]=i}for(var l in this.maps){var a=this.maps[l],s=n[l];a!==s&&this.emitFile(a,s)}for(var o in n)this.maps[o]||this.emitFile(void 0,n[o])}}},methods:{clear:function(){if(this.files.length){var e=this.files;this.files=[],this.maps={},this.emitInput();for(var n=0;n<e.length;n++)this.emitFile(void 0,e[n])}return!0},get:function(e){return!!e&&("object"===("undefined"===typeof e?"undefined":y(e))?this.maps[e.id]||!1:this.maps[e]||!1)},add:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.addIndex,t=e,i=t instanceof Array;i||(t=[t]);for(var l=[],a=0;a<t.length;a++){var s=t[a];this.features.html5&&s instanceof Blob&&(s={file:s,size:s.size,name:s.webkitRelativePath||s.relativePath||s.name||"unknown",type:s.type});var o=!1;if(!1===s.fileObject||(s.fileObject||"undefined"!==typeof Element&&s.el instanceof Element||"undefined"!==typeof Blob&&s.file instanceof Blob)&&(o=!0),o&&(s=b({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},s,{response:{},progress:"0.00",speed:0}),s.data=b({},this.data,s.data?s.data:{}),s.headers=b({},this.headers,s.headers?s.headers:{})),s.id||(s.id=Math.random().toString(36).substr(2)),!this.emitFilter(s,void 0)){if(this.maximum>1&&l.length+this.files.length>=this.maximum)break;if(l.push(s),1===this.maximum)break}}if(!l.length)return!1;1===this.maximum&&this.clear();var r=void 0;if(!0===n||0===n)r=l.concat(this.files);else if(n){var c;r=this.files.concat([]),(c=r).splice.apply(c,[n,0].concat(l))}else r=this.files.concat(l);this.files=r;for(var u=0;u<l.length;u++){var d=l[u];this.maps[d.id]=d}this.emitInput();for(var m=0;m<l.length;m++)this.emitFile(l[m],void 0);return i?l:l[0]},addInputFile:function(e){var n=[];if(e.files)for(var t=0;t<e.files.length;t++){var i=e.files[t];n.push({size:i.size,name:i.webkitRelativePath||i.relativePath||i.name,type:i.type,file:i})}else{var l=e.value.replace(/\\/g,"/").split("/");delete e.__vuex__,n.push({name:l[l.length-1],el:e})}return this.add(n)},addDataTransfer:function(e){var n=this,t=[];if(e.items&&e.items.length){for(var i=[],l=0;l<e.items.length;l++){var a=e.items[l];a=a.getAsEntry?a.getAsEntry()||a.getAsFile():a.webkitGetAsEntry&&a.webkitGetAsEntry()||a.getAsFile(),a&&i.push(a)}return new Promise((function(e,l){var a=function l(a){var s=i[a];if(!s||n.maximum>0&&t.length>=n.maximum)return e(n.add(t));n.getEntry(s).then((function(e){t.push.apply(t,g(e)),l(a+1)}))};a(0)}))}if(e.files.length){for(var s=0;s<e.files.length;s++)if(t.push(e.files[s]),this.maximum>0&&t.length>=this.maximum)break;return Promise.resolve(this.add(t))}return Promise.resolve([])},getEntry:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(i,l){if(e.isFile)e.file((function(e){i([{size:e.size,name:t+e.name,type:e.type,file:e}])}));else if(e.isDirectory&&n.dropDirectory){var a=[],s=e.createReader(),o=function l(){s.readEntries((function(s){var o=function o(r){return!s[r]&&0===r||n.maximum>0&&a.length>=n.maximum?i(a):s[r]?void n.getEntry(s[r],t+e.name+"/").then((function(e){a.push.apply(a,g(e)),o(r+1)})):l()};o(0)}))};o()}else i([])}))},replace:function(e,n){var t=this.get(e),i=this.get(n);if(!t||!i||t===i)return!1;var l=this.files.concat([]),a=l.indexOf(t),s=l.indexOf(i);return-1!==a&&-1!==s&&(l[a]=i,l[s]=t,this.files=l,this.emitInput(),!0)},remove:function(e){var n=this.get(e);if(n){if(this.emitFilter(void 0,n))return!1;var t=this.files.concat([]),i=t.indexOf(n);if(-1===i)return console.error("remove",n),!1;t.splice(i,1),this.files=t,delete this.maps[n.id],this.emitInput(),this.emitFile(void 0,n)}return n},update:function(e,n){var t=this.get(e);if(t){var i=b({},t,n);if(!t.fileObject||!t.active||i.active||i.error||i.success||(i.error="abort"),this.emitFilter(i,t))return!1;var l=this.files.concat([]),a=l.indexOf(t);return-1===a?(console.error("update",t),!1):(l.splice(a,1,i),this.files=l,delete this.maps[t.id],this.maps[i.id]=i,this.emitInput(),this.emitFile(i,t),i)}return!1},emitFilter:function(e,n){var t=!1;return this.$emit("input-filter",e,n,(function(){return t=!0,t})),t},emitFile:function(e,n){this.$emit("input-file",e,n),!(e&&e.fileObject&&e.active)||n&&n.active?e&&e.fileObject&&e.active||!n||!n.fileObject||!n.active||this.uploading--:(this.uploading++,this.$nextTick((function(){var n=this;setTimeout((function(){n.upload(e).then((function(){e=n.get(e),e&&e.fileObject&&n.update(e,{active:!1,success:!e.error})})).catch((function(t){n.update(e,{active:!1,success:!1,error:t.code||t.error||t.message||t})}))}),parseInt(50*Math.random()+50,10))}))),!this.active||Boolean(e)===Boolean(n)&&e.active===n.active||this.watchActive(!0)},emitInput:function(){this.$emit("input",this.files)},upload:function(e){var n=this.get(e);if(!n)return Promise.reject("not_exists");if(!n.fileObject)return Promise.reject("file_object");if(n.error)return Promise.reject(n.error);if(n.success)return Promise.resolve(n);var t=this.extensions;if(t&&(t.length||"undefined"===typeof t.length)&&("object"===("undefined"===typeof t?"undefined":y(t))&&t instanceof RegExp||("string"===typeof t&&(t=t.split(",").map((function(e){return e.trim()})).filter((function(e){return e}))),t=new RegExp("\\.("+t.join("|").replace(/\./g,"\\.")+")$","i")),-1===n.name.search(t)))return Promise.reject("extension");if(this.size>0&&n.size>=0&&n.size>this.size)return Promise.reject("size");if(this.customAction)return this.customAction(n,this);if(this.features.html5){if(this.shouldUseChunkUpload(n))return this.uploadChunk(n);if(n.putAction)return this.uploadPut(n);if(n.postAction)return this.uploadHtml5(n)}return n.postAction?this.uploadHtml4(n):Promise.reject("No action configured")},shouldUseChunkUpload:function(e){return this.chunkEnabled&&!!this.chunkOptions.handler&&e.size>this.chunkOptions.minSize},uploadChunk:function(e){var n=this.chunkOptions.handler;return e.chunk=new n(e,this.chunkOptions),e.chunk.upload()},uploadPut:function(e){var n=[],t=void 0;for(var i in e.data)t=e.data[i],null!==t&&void 0!==t&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(t));var l=n.length?(-1===e.putAction.indexOf("?")?"?":"&")+n.join("&"):"",a=new XMLHttpRequest;return a.open("PUT",e.putAction+l),this.uploadXhr(a,e,e.file)},uploadHtml5:function(e){var n=new window.FormData,t=void 0;for(var i in e.data)t=e.data[i],t&&"object"===("undefined"===typeof t?"undefined":y(t))&&"function"!==typeof t.toString?t instanceof File?n.append(i,t,t.name):n.append(i,JSON.stringify(t)):null!==t&&void 0!==t&&n.append(i,t);n.append(this.name,e.file,e.file.filename||e.name);var l=new XMLHttpRequest;return l.open("POST",e.postAction),this.uploadXhr(l,e,n)},uploadXhr:function(e,n,t){var i=this,l=n,a=0,s=0;e.upload.onprogress=function(e){if(l=i.get(l),e.lengthComputable&&l&&l.fileObject&&l.active){var n=Math.round(Date.now()/1e3);n!==a&&(a=n,l=i.update(l,{progress:(e.loaded/e.total*100).toFixed(2),speed:e.loaded-s}),s=e.loaded)}};var o=setInterval((function(){if(l=i.get(l),!l||!l.fileObject||l.success||l.error||!l.active){o&&(clearInterval(o),o=!1);try{e.abort(),e.timeout=1}catch(n){}}}),100);return new Promise((function(n,a){var s=void 0,r=function(t){if(!s){if(s=!0,o&&(clearInterval(o),o=!1),l=i.get(l),!l)return a("not_exists");if(!l.fileObject)return a("file_object");if(l.error)return a(l.error);if(!l.active)return a("abort");if(l.success)return n(l);var r={};switch(t.type){case"timeout":case"abort":r.error=t.type;break;case"error":e.status?e.status>=500?r.error="server":e.status>=400&&(r.error="denied"):r.error="network";break;default:e.status>=500?r.error="server":e.status>=400?r.error="denied":r.progress="100.00"}if(e.responseText){var c=e.getResponseHeader("Content-Type");c&&-1!==c.indexOf("/json")?r.response=JSON.parse(e.responseText):r.response=e.responseText}return l=i.update(l,r),l.error?a(l.error):n(l)}};for(var c in e.onload=r,e.onerror=r,e.onabort=r,e.ontimeout=r,l.timeout&&(e.timeout=l.timeout),l.headers)e.setRequestHeader(c,l.headers[c]);l=i.update(l,{xhr:e}),e.send(t)}))},uploadHtml4:function(e){var n=this,t=e,i=function(e){27===e.keyCode&&e.preventDefault()},l=document.createElement("iframe");l.id="upload-iframe-"+t.id,l.name="upload-iframe-"+t.id,l.src="about:blank",l.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var a=document.createElement("form");a.action=t.postAction,a.name="upload-form-"+t.id,a.setAttribute("method","POST"),a.setAttribute("target","upload-iframe-"+t.id),a.setAttribute("enctype","multipart/form-data");var s=void 0,o=void 0;for(var r in t.data)s=t.data[r],s&&"object"===("undefined"===typeof s?"undefined":y(s))&&"function"!==typeof s.toString&&(s=JSON.stringify(s)),null!==s&&void 0!==s&&(o=document.createElement("input"),o.type="hidden",o.name=r,o.value=s,a.appendChild(o));a.appendChild(t.el),document.body.appendChild(l).appendChild(a);var c=function(){var e=void 0;try{l.contentWindow&&(e=l.contentWindow.document)}catch(n){}if(!e)try{e=l.contentDocument?l.contentDocument:l.document}catch(n){e=l.document}return e&&e.body?e.body.innerHTML:null};return new Promise((function(e,s){setTimeout((function(){if(t=n.update(t,{iframe:l}),!t)return s("not_exists");var o=setInterval((function(){t=n.get(t),t&&t.fileObject&&!t.success&&!t.error&&t.active||(o&&(clearInterval(o),o=!1),l.onabort({type:t?"abort":"not_exists"}))}),100),r=void 0,u=function(l){if(!r){if(r=!0,o&&(clearInterval(o),o=!1),document.body.removeEventListener("keydown",i),t=n.get(t),!t)return s("not_exists");if(!t.fileObject)return s("file_object");if(t.error)return s(t.error);if(!t.active)return s("abort");if(t.success)return e(t);var a=c(),u={};switch(l.type){case"abort":u.error="abort";break;case"error":t.error?u.error=t.error:u.error=null===a?"network":"denied";break;default:t.error?u.error=t.error:null===u?u.error="network":u.progress="100.00"}if(null!==a){if(a&&"{"===a.substr(0,1)&&"}"===a.substr(a.length-1,1))try{a=JSON.parse(a)}catch(d){}u.response=a}return t=n.update(t,u),t.error?s(t.error):e(t)}};l.onload=u,l.onerror=u,l.onabort=u,document.body.addEventListener("keydown",i),a.submit()}),50)})).then((function(e){return l.parentNode&&l.parentNode.removeChild(l),e})).catch((function(e){return l.parentNode&&l.parentNode.removeChild(l),e}))},watchActive:function(e){var n=void 0,t=0;while(n=this.files[t])if(t++,n.fileObject)if(e&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;n.active||n.error||n.success||this.update(n,{active:!0})}else n.active&&this.update(n,{active:!1});else;0===this.uploading&&(this.active=!1)},watchDrop:function(e){var n=e;if(this.features.drop){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDragenter,!1),document.removeEventListener("dragleave",this.onDragleave,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch(t){}n?"string"===typeof n?n=document.querySelector(n)||this.$root.$el.querySelector(n):!0===n&&(n=this.$parent.$el):n=!1,this.dropElement=n,this.dropElement&&(document.addEventListener("dragenter",this.onDragenter,!1),document.addEventListener("dragleave",this.onDragleave,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},onDragenter:function(e){if(e.preventDefault(),!this.dropActive&&e.dataTransfer){var n=e.dataTransfer;n.files&&n.files.length?this.dropActive=!0:n.types?(n.types.indexOf&&-1!==n.types.indexOf("Files")||n.types.contains&&n.types.contains("Files"))&&(this.dropActive=!0):this.dropActive=!0}},onDragleave:function(e){e.preventDefault(),this.dropActive&&("HTML"===e.target.nodeName||e.target===e.explicitOriginalTarget||!e.fromElement&&(e.clientX<=0||e.clientY<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight))&&(this.dropActive=!1)},onDragover:function(e){e.preventDefault()},onDocumentDrop:function(){this.dropActive=!1},onDrop:function(e){e.preventDefault(),this.addDataTransfer(e.dataTransfer)}}},w="undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function x(e){return function(e,n){return $(e,n)}}var _=document.head||document.getElementsByTagName("head")[0],F={};function $(e,n){var t=w?n.media||"default":e,i=F[t]||(F[t]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);var l=n.source;if(n.map&&(l+="\n/*# sourceURL="+n.map.sources[0]+" */",l+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",n.media&&i.element.setAttribute("media",n.media),_.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(l),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var a=i.ids.size-1,s=document.createTextNode(l),o=i.element.childNodes;o[a]&&i.element.removeChild(o[a]),o.length?i.element.insertBefore(s,o[a]):i.element.appendChild(s)}}}var S=x,N=k,j=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("span",{class:e.className},[e._t("default"),e._v(" "),t("label",{attrs:{for:e.inputId||e.name}}),e._v(" "),t("input-file")],2)},I=[],O=function(e){e&&e("data-v-76d380b6_0",{source:".file-uploads{overflow:hidden;position:relative;text-align:center;display:inline-block}.file-uploads.file-uploads-html4 input,.file-uploads.file-uploads-html5 label{background:#fff;opacity:0;font-size:20em;z-index:1;top:0;left:0;right:0;bottom:0;position:absolute;width:100%;height:100%}.file-uploads.file-uploads-html4 label,.file-uploads.file-uploads-html5 input{background:rgba(255,255,255,0);overflow:hidden;position:fixed;width:1px;height:1px;z-index:-1;opacity:0}",map:void 0,media:void 0})},T=void 0,D=void 0,E=!1,z=c({render:j,staticRenderFns:I},O,N,T,E,D,S,void 0),U=Object.freeze({default:z});function R(e){return e&&e["default"]||e}var P=R(U),L=P;return L}))}}]);
//# sourceMappingURL=datasetUpload.f7a960d8.js.map